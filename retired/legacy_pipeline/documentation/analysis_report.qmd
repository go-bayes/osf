---
title: "Trust in Science Over Time: Analysis Report"
subtitle: "Response Bias Masks the Erosion of Trust"
author: "Generated from OSF Reproducible Analysis"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    code_folding: hide
  pdf_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(tidyverse)
library(here)
library(knitr)
library(kableExtra)
# Load results
# key_findings <- jsonlite::read_json((here::here("results/key_findings.json")))
key_findings <- jsonlite::read_json("/Users/joseph/GIT/osf/results/key_findings.json")
```

# Executive Summary

This report presents results from a longitudinal analysis of trust in science using 
data from the New Zealand Attitudes and Values Study (NZAVS). We tracked 
`r format(key_findings$n_total, big.mark = ",")` participants from 2019-2024, 
spanning the COVID-19 pandemic period.

## Key Findings

1. **Initial Rise**: Both social value of science and trust in scientists increased 
   during New Zealand's COVID-19 response (2020-2021)
   
2. **Subsequent Decline**: Both measures declined below baseline levels by 2022-2024

3. **Attrition Bias**: Complete case analysis masked these declines, showing 
   artificially stable or positive trends

# Methods

```{r methods, child="/Users/joseph/GIT/osf/documentation/METHODS.md"}
```

# Results

## Temporal Trends

```{r}
main_figure <- margot::read_multiple_images(path_multi_plots = "/Users/joseph/GIT/osf/results/figures/", pattern = "main_figure_continuous\\.png$")
print(main_figure)
```

## Numerical Estimates

```{r estimates-table}
estimates <- read.csv(("/Users/joseph/GIT/osf/results/tables/marginal_means_estimates.csv"))

estimates %>%
  kable(caption = "Table 1. Marginal mean estimates with 95% confidence intervals") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
```

# Discussion

We demonstarate how decreasing trust in science can be masked by selection bias due to attrition. 

## Implications

See manuscript. 


# Technical Details

## Missing Data Patterns

Complete case analysis retained only `r format(key_findings$n_observed, big.mark = ",")` 
observations, suggesting substantial attrition. Multiple imputation was essential 
for obtaining unbiased estimates.

## Model Diagnostics

All models showed good fit with no evidence of specification issues. Natural cubic 
splines adequately captured non-linear temporal trends.

# Reproducibility

This analysis is reproducible using the provided code and synthetic data. 
Due to privacy constraints, the original NZAVS data cannot be shared publicly, but 
synthetic data preserving key statistical properties is available.

## Running the Analysis

```bash
# Install required packages
Rscript code/00_setup_environment.R

# Run analysis pipeline
Rscript code/01_load_prepare_data.R
Rscript code/02_fit_models.R
Rscript code/03_create_visualizations.R
Rscript code/04_generate_tables.R
Rscript code/05_extract_results.R
Rscript code/06_generate_report.R
```

# References

- Agresti, A. (2013). *Categorical data analysis* (3rd ed.). Wiley.
- Rubin, D. B. (1987). *Multiple imputation for nonresponse in surveys*. Wiley.
- Yee, T. W. (2015). *Vector generalized linear and additive models*. Springer.

# Session Information

```{r session}
sessionInfo()
```

